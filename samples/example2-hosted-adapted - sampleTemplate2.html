<html>
<head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <link type="text/css" href="http://rdforms.com/release/dijit/themes/claro/claro.css" rel="stylesheet" />
    <link type="text/css" href="http://rdforms.com/release/rdforms/view/resources/rdforms.css" rel="stylesheet" />
    <link rel="stylesheet" type="text/css" href="../css/cpsv.css">
    <script src="../release/dojo/dojo.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>
    <script src="download.js"></script>
    <script src="import.js"></script>
</head>
<body class="claro">
<script type="text/javascript">
    require([
        'rdfjson/Graph',             //Rdfjson Graph API
        'rdforms/template/ItemStore', //Stores all the RDForm templates
        'rdforms/apps/Experiment',        //The editor User interface
        'dojo/json',
        'dojo/text!./emptyRDF.json',
        'dojo/text!./sampleTemplate2.json',
        'dojo/domReady!'             //Wait until the dom is ready.
    ], function(Graph, ItemStore, Experiment, json, emptyRDF, sampleTemplate2) {
        /*Setup the editor.
        Create the graph, itemstore and templatebundle
        Create a new experiment inside the container div and start it*/
        var graph = new Graph(json.parse(emptyRDF));
        var itemStore = new ItemStore();
        var bundle = itemStore.registerBundle({source: json.parse(sampleTemplate2)});
        var e = new Experiment({
            graph: graph,
            template: bundle.getRoot(),
            hideTemplate: true
        }, "body");
        e.startup();


        /*Append a download and Browse button to the ribbon in the RDF tab and add the onclick functionality to it*/
        /*Append a button to the ribbon in the RDF tab*/
        $('#dijit_layout_TabContainer_1_tablist').append("<button>download</button>");
        var buttons = document.getElementById("dijit_layout_TabContainer_1_tablist").getElementsByTagName("BUTTON");
        /*Append a Browse button to the ribbon in the RDF tab and add the onclick functionality to it*/
        $('#dijit_layout_TabContainer_1_tablist').append("<input type='file' accept='text/plain' onchange='openFile(event)'>");

        /*Add the onlick event to the button. Download the text to a local file.*/
        buttons[0].onclick = function(){
            downloadClicked();              
        };

    });
</script>
    <div class="container">
        <header class="banner">
        	  <a id="logobanner" href="#"><img src="../images/CPSV-AP_logo.png" width="100" height="100" float = "left" alt="CPSV-AP logo" /></a>
        	  <h1 id = "maintitle"> Public Service Describer </h1>
   
        </header>
        <div class="body" id="body"></div>
        <footer>
                <a href="http://ec.europa.eu/"><img src="../images/logo_commission.png" width="172" height="119" alt="European Commission"/></a>
                <p>
                    <small>Public service describer: Copyright ©  European Union 2016. This validator is published under the <a href="https://joinup.ec.europa.eu/community/eupl/home">EUPL v1.1 licence</a><br/>
                    This project is funded by <a href="https://ec.europa.eu/isa2/actions/accessing-member-state-information-resources-european-level_en">ISA2 Action 2016.29</a> under framework contract DI/07171 Lot 2 (Specific Contract 270).<br/>
                    Authors: Carmen Vandeloo (Based on the work done).<br/>
                    Apache Fuseki is a copyright © 2011-2015 of the Apache Software Foundation, licensed under the <a href="http://www.apache.org/licenses/LICENSE-2.0">Apache License, Version 2.0</a>.<br/>
                    </small>
                </p>
        </footer>
    </div>
</body>
</html>